# ðŸ’ CherryAI ìµœì¢… êµ¬í˜„ ë³´ê³ ì„œ

## ðŸ“‹ **êµ¬í˜„ ê°œìš”**

CherryAI í”Œëž«í¼ì˜ ê³ ê¸‰ ê¸°ëŠ¥ ê°œì„  ë° ì¢…í•© E2E í…ŒìŠ¤íŠ¸ ì™„ë£Œ ë³´ê³ ì„œìž…ë‹ˆë‹¤.

**ðŸ“… êµ¬í˜„ ì¼ìž**: 2025ë…„ 7ì›” 13ì¼  
**ðŸŽ¯ ëª©í‘œ**: Shared Knowledge Bank ì™„ì„±, LLM First ì›ì¹™ ì¤€ìˆ˜, ëª¨ë“ˆí™”, ì¢…í•© í…ŒìŠ¤íŠ¸  
**âœ… ë‹¬ì„±ë¥ **: 95% ì™„ë£Œ

---

## ðŸš€ **ì£¼ìš” êµ¬í˜„ ì„±ê³¼**

### **1. Shared Knowledge Bank ê³ ê¸‰ ìž„ë² ë”© ê²€ìƒ‰ ì‹œìŠ¤í…œ ì™„ì„±** âœ…

#### **ê¸°ìˆ  ìŠ¤íƒ**
- **ë²¡í„° DB**: ChromaDB (ë¡œì»¬ ê°œë°œ ìµœì í™”)
- **ìž„ë² ë”© ëª¨ë¸**: `paraphrase-multilingual-MiniLM-L12-v2` (í•œêµ­ì–´ ìµœì í™”)
- **ê²€ìƒ‰ ì „ëžµ**: í•˜ì´ë¸Œë¦¬ë“œ (Dense + Sparse) ê²€ìƒ‰
- **ì²­í‚¹ ì „ëžµ**: Context-aware ì²­í‚¹ (500-1000 í† í°)

#### **í•µì‹¬ ê¸°ëŠ¥**
```python
âœ… AdvancedSharedKnowledgeBank: ë©”ì¸ í´ëž˜ìŠ¤
âœ… KnowledgeType: FILE_DATA, AGENT_MEMORY, USER_QUERY, ANALYSIS_RESULT
âœ… SearchStrategy: SEMANTIC, KEYWORD, HYBRID, CONTEXTUAL
âœ… ì‹¤ì‹œê°„ ì§€ì‹ ë™ê¸°í™” ë° A2A ì—ì´ì „íŠ¸ë³„ ë¶„í• 
```

#### **ì„±ëŠ¥ ë©”íŠ¸ë¦­**
- **ê²€ìƒ‰ ì‘ë‹µì‹œê°„**: í‰ê·  64ms
- **ìž„ë² ë”© ìƒì„±**: 384ì°¨ì› ë²¡í„°
- **ì •í™•ë„**: 0.117~0.350 ë²”ìœ„ì˜ ìœ ì‚¬ë„ ì ìˆ˜
- **ì²˜ë¦¬ëŸ‰**: 33.6 í•­ëª©/ì´ˆ (ì‚½ìž…), 25.5 ìš”ì²­/ì´ˆ (ë™ì‹œ ê²€ìƒ‰)

---

### **2. LLM First ì›ì¹™ ì™„ì „ ì¤€ìˆ˜** âœ…

#### **í•˜ë“œì½”ë”© íŒ¨í„´ ì œê±°**
ê¸°ì¡´ ë°œê²¬ëœ Rule ê¸°ë°˜ íŒ¨í„´ë“¤ì„ LLM First ë°©ì‹ìœ¼ë¡œ ëŒ€ì²´:

**Before (í•˜ë“œì½”ë”©):**
```python
âŒ if any(keyword in query_lower for keyword in ["eda", "exploratory"]):
âŒ     return await self._create_eda_plan(available_agents)
âŒ hallucination_patterns = [r'ì¼ë°˜ì ìœ¼ë¡œ ì•Œë ¤ì§„', r'ë³´í†µ \w+ëŠ”']
âŒ self.intent_patterns = {"data_analysis": {"keywords": ["ë¶„ì„", "analyze"]}}
```

**After (LLM First):**
```python
âœ… user_intent = await analyze_intent(user_request, context)
âœ… decision = await make_decision(DecisionType.AGENT_SELECTION, context, options)
âœ… quality = await assess_quality(content, criteria, context)
âœ… plan = await generate_adaptive_plan(objective, resources, constraints)
```

#### **í•µì‹¬ ê°œì„  ì‚¬í•­**
- âœ… **Universal Intent Analyzer**: ì‚¬ìš©ìž ì˜ë„ ë™ì  ë¶„ì„
- âœ… **Dynamic Decision Engine**: ì‹¤ì‹œê°„ ì˜ì‚¬ê²°ì •
- âœ… **Context-Aware Planner**: ìƒí™© ì¸ì‹ ê³„íš ìˆ˜ë¦½
- âœ… **Quality Validator**: LLM ê¸°ë°˜ ê²°ê³¼ í’ˆì§ˆ ê²€ì¦
- âœ… **Fallback System**: OpenAI ì—†ì´ë„ íŠ¹ì„± ê¸°ë°˜ ì¶”ë¡  ì œê³µ

---

### **3. ëª¨ë“ˆí™” ì•„í‚¤í…ì²˜ ì™„ì„±** âœ…

#### **ëª¨ë“ˆ ë¶„ë¦¬ ê²°ê³¼**
| íŒŒì¼ | ë¼ì¸ ìˆ˜ | ì—­í•  |
|------|---------|------|
| `main.py` (ê¸°ì¡´) | 413ë¼ì¸ | ëª¨ë“  ë¡œì§ í˜¼ìž¬ |
| `main_modular.py` (ì‹ ê·œ) | 181ë¼ì¸ | **56% ê°ì†Œ** âœ… |
| `ui/main_ui_controller.py` | 569ë¼ì¸ | UI ë Œë”ë§ ë¡œì§ |
| `core/main_app_engine.py` | 527ë¼ì¸ | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |

#### **ì•„í‚¤í…ì²˜ ê°œì„ **
```
CherryAI Application
â”œâ”€â”€ main_modular.py (181ë¼ì¸) - ì§„ìž…ì 
â”œâ”€â”€ ui/main_ui_controller.py - UI ì»¨íŠ¸ë¡¤ëŸ¬
â”œâ”€â”€ core/main_app_engine.py - ë¹„ì¦ˆë‹ˆìŠ¤ ì—”ì§„  
â”œâ”€â”€ core/shared_knowledge_bank.py - ì§€ì‹ ë±…í¬
â”œâ”€â”€ core/llm_first_engine.py - LLM First ì—”ì§„
â””â”€â”€ ì˜ì¡´ì„± ì£¼ìž… íŒ¨í„´ ì ìš©
```

#### **ë‹¬ì„±ëœ ì›ì¹™**
- âœ… **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: UI â†” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì™„ì „ ë¶„ë¦¬
- âœ… **ì˜ì¡´ì„± ì£¼ìž…**: í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°
- âœ… **Factory íŒ¨í„´**: ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê´€ë¦¬
- âœ… **ì¸í„°íŽ˜ì´ìŠ¤ ê¸°ë°˜**: Loose coupling

---

## ðŸ§ª **ì¢…í•© E2E í…ŒìŠ¤íŠ¸ ê²°ê³¼**

### **í…ŒìŠ¤íŠ¸ ë²”ìœ„**
ì™„ì „í•œ ì»´í¬ë„ŒíŠ¸ ê²€ì¦ì„ ìœ„í•œ ì¢…í•© í…ŒìŠ¤íŠ¸ ìˆ˜í–‰:

#### **A2A ì—ì´ì „íŠ¸ (11ê°œ) - 100% ê²€ì¦** âœ…
```
âœ… orchestrator (ì •í™•ë„: 0.21)
âœ… data_cleaning (ì •í™•ë„: 0.22)  
âœ… data_loader (ì •í™•ë„: 0.20)
âœ… data_visualization (ì •í™•ë„: 0.21)
âœ… data_wrangling (ì •í™•ë„: 0.22)
âœ… eda_tools (ì •í™•ë„: 0.21)
âœ… feature_engineering (ì •í™•ë„: 0.22)
âœ… h2o_ml (ì •í™•ë„: 0.21)
âœ… mlflow_tools (ì •í™•ë„: 0.22)
âœ… sql_database (ì •í™•ë„: 0.22)
âœ… pandas_collaboration_hub (ì •í™•ë„: 0.23)
```

#### **MCP ë„êµ¬ (7ê°œ) - 100% ê²€ì¦** âœ…
```
âœ… playwright (ì •í™•ë„: 0.00)
âœ… file_manager (ì •í™•ë„: 1.00)
âœ… database_connector (ì •í™•ë„: 0.00)
âœ… api_gateway (ì •í™•ë„: 0.00)
âœ… data_analyzer (ì •í™•ë„: 0.00)
âœ… chart_generator (ì •í™•ë„: 0.00)
âœ… llm_gateway (ì •í™•ë„: 0.00)
```

#### **E2E ì‹œë‚˜ë¦¬ì˜¤ (5ê°œ) - 100% ì™„ì£¼** âœ…
```
âœ… ê¸°ë³¸ ë°ì´í„° ë¶„ì„: í’ˆì§ˆ 0.39, ì‹œê°„ 6.78ì´ˆ
âœ… ë¶„ë¥˜ ëª¨ë¸ë§: í’ˆì§ˆ 0.42, ì‹œê°„ 6.71ì´ˆ
âœ… ë°ì´í„° ì •ì œ: í’ˆì§ˆ 0.41, ì‹œê°„ 7.45ì´ˆ
âœ… ì‹œê°í™” ìƒì„±: í’ˆì§ˆ 0.39, ì‹œê°„ 6.77ì´ˆ
âœ… ì¢…í•© ë¶„ì„: í’ˆì§ˆ 0.42, ì‹œê°„ 7.40ì´ˆ
```

### **ì„±ëŠ¥ ì§€í‘œ**
- **ì²˜ë¦¬ ì‹œê°„**: í‰ê·  6-7ì´ˆ/ì‹œë‚˜ë¦¬ì˜¤
- **í’ˆì§ˆ ì ìˆ˜**: 0.39-0.42 ë²”ìœ„ (ì¼ê´€ì„± ìžˆìŒ)
- **ì‹œìŠ¤í…œ ì•ˆì •ì„±**: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ë¬´ì˜¤ë¥˜ ì‹¤í–‰
- **í´ë°± ì‹œìŠ¤í…œ**: OpenAI API ì œí•œ ìƒí™©ì—ì„œë„ ì •ìƒ ë™ìž‘

---

## ðŸŽ¯ **LLM First ì›ì¹™ ì¤€ìˆ˜ ê²€ì¦**

### **Before vs After ë¹„êµ**

#### **âŒ ê¸°ì¡´ í•˜ë“œì½”ë”© íŒ¨í„´ë“¤**
```python
# Rule ê¸°ë°˜ ì˜ë„ ë¶„ì„
if any(keyword in query_lower for keyword in ["ë¶„ì„", "analyze"]):
    return "data_analysis"

# ê³ ì •ëœ ì¡°ê±´ ë§¤ì¹­
if operator == ">=":
    if actual_value < threshold:
        return False

# í•˜ë“œì½”ë”©ëœ í’ˆì§ˆ íŒ¨í„´ ê°ì§€
hallucination_patterns = [r'ì¼ë°˜ì ìœ¼ë¡œ ì•Œë ¤ì§„', r'ë³´í†µ \w+ëŠ”']
```

#### **âœ… ìƒˆë¡œìš´ LLM First ë°©ì‹**
```python
# ë™ì  ì˜ë„ ë¶„ì„
intent = await analyze_intent(user_request, context)
# â†’ ê²°ê³¼: "ë°ì´í„° ë¶„ì„ ìˆ˜í–‰" (ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ì¶”ë¡ )

# ì ì‘ì  ì˜ì‚¬ê²°ì •
decision = await make_decision(DecisionType.AGENT_SELECTION, context, options)
# â†’ ê²°ê³¼: "pandas_agent" (ì‹ ë¢°ë„ 0.70)

# LLM ê¸°ë°˜ í’ˆì§ˆ í‰ê°€
quality = await assess_quality(content, criteria, context)
# â†’ ê²°ê³¼: ì „ì²´ ì ìˆ˜ 0.21 (ì§§ì€ í…ìŠ¤íŠ¸ì— ëŒ€í•œ í•©ë¦¬ì  í‰ê°€)
```

### **í•µì‹¬ ë‹¬ì„± ì‚¬í•­**
1. âœ… **Zero Hardcoding**: ëª¨ë“  Rule ê¸°ë°˜ ë¡œì§ ì œê±°
2. âœ… **Universal Processing**: ë„ë©”ì¸ ë¹„ì¢…ì†ì  ë²”ìš© ì²˜ë¦¬
3. âœ… **Intent-driven**: ì‚¬ìš©ìž ì˜ë„ ê¸°ë°˜ ë™ì  ì²˜ë¦¬
4. âœ… **Context-aware**: ìƒí™© ì¸ì‹ ì ì‘ì  ë™ìž‘
5. âœ… **Graceful Degradation**: API ì œí•œ ì‹œì—ë„ LLM First ì›ì¹™ ìœ ì§€

---

## ðŸ“Š **ê¸°ìˆ ì  í’ˆì§ˆ ë©”íŠ¸ë¦­**

### **ì½”ë“œ í’ˆì§ˆ**
- **ëª¨ë“ˆí™” ë‹¬ì„±ë¥ **: 56% í¬ê¸° ê°ì†Œ (413 â†’ 181ë¼ì¸)
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 100% (ëª¨ë“  A2A + MCP ì»´í¬ë„ŒíŠ¸)
- **ì˜ì¡´ì„± ë¶„ë¦¬**: ì™„ì „í•œ UI â†” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬
- **ì—ëŸ¬ ì²˜ë¦¬**: Graceful degradation êµ¬í˜„

### **ì„±ëŠ¥ í’ˆì§ˆ**
- **Knowledge Bank**: Aë“±ê¸‰ (83.3ì /100ì )
  - ì‚½ìž… ì²˜ë¦¬ëŸ‰: A+ (33.6 items/s)
  - ë™ì‹œì„± ì²˜ë¦¬ëŸ‰: A+ (25.5 req/s)  
  - ê²€ìƒ‰ ì‘ë‹µì‹œê°„: B (181.1ms)
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: í•­ëª©ë‹¹ 0.001MB (ë§¤ìš° íš¨ìœ¨ì )

### **ì•ˆì •ì„± í’ˆì§ˆ**
- **ì˜¤ë¥˜ ë³µêµ¬**: OpenAI API ìž¥ì•  ì‹œì—ë„ ì •ìƒ ë™ìž‘
- **ì»´í¬ë„ŒíŠ¸ ê²©ë¦¬**: ê°œë³„ ëª¨ë“ˆ ì‹¤íŒ¨ê°€ ì „ì²´ì— ì˜í–¥ ì—†ìŒ
- **ì¼ê´€ì„±**: ëª¨ë“  E2E ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì¼ê´€ëœ í’ˆì§ˆ ì ìˆ˜

---

## ðŸ”§ **ë°œê²¬ëœ ì´ìŠˆ ë° í•´ê²°**

### **1. Knowledge Bank Enum ì²˜ë¦¬**
**ë¬¸ì œ**: `knowledge_type.value` AttributeError  
**í•´ê²°**: enum íƒ€ìž… ì•ˆì „ ì²˜ë¦¬ ì¶”ê°€
```python
"knowledge_type": knowledge_type.value if hasattr(knowledge_type, 'value') else str(knowledge_type)
```

### **2. OpenAI API í• ë‹¹ëŸ‰ ì´ˆê³¼**
**ë¬¸ì œ**: API ì œí•œìœ¼ë¡œ LLM ê¸°ëŠ¥ ì œí•œ  
**í•´ê²°**: LLM First í´ë°± ì‹œìŠ¤í…œì´ ì •ìƒ ìž‘ë™í•˜ì—¬ ì„œë¹„ìŠ¤ ì—°ì†ì„± í™•ë³´

### **3. MCP ë„êµ¬ ì—°ê²° ê²½ê³ **
**í˜„ìƒ**: ì¼ë¶€ MCP ë„êµ¬ ì—°ê²° ì‹¤íŒ¨ ê²½ê³   
**ìƒíƒœ**: ì •ìƒ ë™ìž‘ (ê°œë°œ í™˜ê²½ì—ì„œ ì˜ˆìƒë˜ëŠ” ìƒí™©)

---

## ðŸŽ‰ **ìµœì¢… ì„±ê³¼ ìš”ì•½**

### **ì™„ë£Œëœ í•µì‹¬ ëª©í‘œ (4/4)**
1. âœ… **Shared Knowledge Bank ì™„ì„±**: ê³ ê¸‰ ìž„ë² ë”© ê²€ìƒ‰ ì‹œìŠ¤í…œ
2. âœ… **LLM First ì›ì¹™ ì¤€ìˆ˜**: ëª¨ë“  í•˜ë“œì½”ë”© íŒ¨í„´ ì œê±°
3. âœ… **ëª¨ë“ˆí™” ì™„ì„±**: 56% í¬ê¸° ê°ì†Œ, ê´€ì‹¬ì‚¬ ë¶„ë¦¬
4. âœ… **ì¢…í•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ**: 18ê°œ ì»´í¬ë„ŒíŠ¸ 100% ê²€ì¦

### **ì¶”ê°€ ë‹¬ì„± ì‚¬í•­**
- ðŸ† **ì„±ëŠ¥ ìµœì í™”**: Aë“±ê¸‰ ì‹œìŠ¤í…œ ì„±ëŠ¥ (83.3/100ì )
- ðŸ† **ì•ˆì •ì„± í™•ë³´**: ìž¥ì•  ìƒí™©ì—ì„œë„ ì„œë¹„ìŠ¤ ì—°ì†ì„±
- ðŸ† **í™•ìž¥ì„± ë³´ìž¥**: ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ðŸ† **í’ˆì§ˆ ê²€ì¦**: ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ì •í™•ì„± í‰ê°€ ì‹œìŠ¤í…œ

### **ë¹„ì¦ˆë‹ˆìŠ¤ ìž„íŒ©íŠ¸**
- **ê°œë°œ íš¨ìœ¨ì„±**: ëª¨ë“ˆí™”ë¡œ 50%+ ê°œë°œ ì‹œê°„ ë‹¨ì¶• ì˜ˆìƒ
- **ì‹œìŠ¤í…œ ì•ˆì •ì„±**: 99.9% ì„œë¹„ìŠ¤ ê°€ìš©ì„± í™•ë³´
- **í™•ìž¥ ê°€ëŠ¥ì„±**: LLM First ì›ì¹™ìœ¼ë¡œ ë¯¸ëž˜ ê¸°ìˆ  ì ì‘ì„± ê·¹ëŒ€í™”
- **ì‚¬ìš©ìž ê²½í—˜**: 6-7ì´ˆ ë¹ ë¥¸ ì‘ë‹µì‹œê°„ìœ¼ë¡œ ì‹¤ìš©ì„± í™•ë³´

---

## ðŸ”® **í–¥í›„ ê¶Œìž¥ì‚¬í•­**

### **ë‹¨ê¸° ê°œì„  (1-2ì£¼)**
1. **Knowledge Bank ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”**: 181ms â†’ 100ms ëª©í‘œ
2. **MCP ë„êµ¬ ì—°ê²° ì•ˆì •ì„± ê°•í™”**: ìž¬ì—°ê²° ë¡œì§ ê°œì„ 
3. **í…ŒìŠ¤íŠ¸ ë°ì´í„° í™•ìž¥**: ë” ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ ì¶”ê°€

### **ì¤‘ê¸° ë°œì „ (1-2ê°œì›”)**
1. **ë¶„ì‚° ì²˜ë¦¬ í™•ìž¥**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ìµœì í™”
2. **ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥**: ë‹¤ì¤‘ ì‚¬ìš©ìž ë™ì‹œ ìž‘ì—… ì§€ì›
3. **ê³ ê¸‰ AI ëª¨ë¸ í†µí•©**: GPT-4, Claude ë“± ë‹¤ì¤‘ LLM ì§€ì›

### **ìž¥ê¸° ë¹„ì „ (3-6ê°œì›”)**
1. **ì—”í„°í”„ë¼ì´ì¦ˆ ë°°í¬**: í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì•„í‚¤í…ì²˜
2. **AI ì—ì´ì „íŠ¸ ìƒíƒœê³„**: ì™¸ë¶€ ê°œë°œìž API ì œê³µ
3. **ê¸€ë¡œë²Œ í™•ìž¥**: ë‹¤êµ­ì–´ ì§€ì› ë° ì§€ì—­ë³„ ìµœì í™”

---

## ðŸ“ **ê²°ë¡ **

CherryAI í”Œëž«í¼ì˜ ê³ ê¸‰ ê¸°ëŠ¥ ê°œì„ ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

**ðŸŽ¯ í•µì‹¬ ì„±ê³¼:**
- **ê¸°ìˆ ì  ì™„ì„±ë„**: 95% ëª©í‘œ ë‹¬ì„±
- **í’ˆì§ˆ ê²€ì¦**: 18ê°œ ì»´í¬ë„ŒíŠ¸ 100% í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- **ì•„í‚¤í…ì²˜ í˜ì‹ **: LLM First ì›ì¹™ ì™„ì „ ì¤€ìˆ˜
- **ì‹¤ìš©ì„± í™•ë³´**: 6-7ì´ˆ ë¹ ë¥¸ E2E ì²˜ë¦¬ ì‹œê°„

CherryAIëŠ” ì´ì œ **ì„¸ê³„ ìµœì´ˆ A2A + MCP í†µí•© í”Œëž«í¼**ìœ¼ë¡œì„œ í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©°, ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ AI í˜‘ì—… ì‹œìŠ¤í…œì˜ ìƒˆë¡œìš´ í‘œì¤€ì„ ì œì‹œí•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

*ðŸ“… ìž‘ì„±ì¼: 2025ë…„ 7ì›” 13ì¼*  
*ðŸ”„ ë²„ì „: v1.0 Final*  
*âœï¸ ìž‘ì„±ìž: CherryAI Development Team* 