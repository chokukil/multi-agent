# ğŸ’ CherryAI Phase 1-4 ì™„ì„± ì‹œìŠ¤í…œ ì¢…í•© ê°€ì´ë“œ

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

CherryAIëŠ” LLM ê¸°ë°˜ì˜ ê³ ê¸‰ ë©€í‹° ì—ì´ì „íŠ¸ ë°ì´í„° ë¶„ì„ í”Œë«í¼ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ì •í™•í•˜ê²Œ ë¶„ì„í•˜ê³  ì „ë¬¸ì ì¸ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” íŠ¹ì§•
- **Phase 1**: ì •í™•í•œ íŒŒì¼ ì—…ë¡œë“œ ë° ì¶”ì  ì‹œìŠ¤í…œ
- **Phase 2**: Universal Pandas-AI A2A ì„œë²„ í†µí•©
- **Phase 3**: ë©€í‹° ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **Phase 4**: ê³ ê¸‰ ìë™í™” ì‹œìŠ¤í…œ (í”„ë¡œíŒŒì¼ë§, ì½”ë“œ ì¶”ì , ê²°ê³¼ í•´ì„)
- **Enhanced Langfuse í†µí•©**: ì „ì²´ ì›Œí¬í”Œë¡œìš° ì¶”ì  ë° ë¡œê¹…

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CherryAI í†µí•© ì‹œìŠ¤í…œ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 1: Enhanced User File Management                          â”‚
â”‚ â”œâ”€ UserFileTracker: íŒŒì¼ ìƒëª…ì£¼ê¸° ì¶”ì                           â”‚
â”‚ â”œâ”€ SessionDataManager: ì„¸ì…˜ë³„ íŒŒì¼ ê´€ë¦¬                         â”‚
â”‚ â””â”€ A2A í˜¸í™˜ íŒŒì¼ ì„ íƒ ì•Œê³ ë¦¬ì¦˜                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 2: Universal Pandas-AI Integration                        â”‚
â”‚ â”œâ”€ A2A Protocol ì™„ì „ í˜¸í™˜                                       â”‚
â”‚ â”œâ”€ ë²”ìš© ë°ì´í„° ë¶„ì„ ì—”ì§„                                         â”‚
â”‚ â””â”€ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì§€ì›                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 3: Multi-Agent Orchestration                              â”‚
â”‚ â”œâ”€ Universal Data Analysis Router                               â”‚
â”‚ â”œâ”€ Specialized Data Agents (9ê°œ ì „ë¬¸ ì—ì´ì „íŠ¸)                   â”‚
â”‚ â””â”€ Multi-Agent Orchestrator                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 4: Advanced Automation Systems                            â”‚
â”‚ â”œâ”€ Auto Data Profiler: ìë™ ë°ì´í„° í’ˆì§ˆ ë¶„ì„                    â”‚
â”‚ â”œâ”€ Advanced Code Tracker: ì½”ë“œ ìƒì„± ë° ì‹¤í–‰ ì¶”ì                 â”‚
â”‚ â”œâ”€ Intelligent Result Interpreter: AI ê²°ê³¼ í•´ì„                 â”‚
â”‚ â””â”€ Enhanced Langfuse Integration: ì „ì²´ ì›Œí¬í”Œë¡œìš° ì¶”ì           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- Python 3.12+
- macOS/Linux í™˜ê²½
- 8GB+ ë©”ëª¨ë¦¬ ê¶Œì¥

### 2. ì„¤ì¹˜ ê³¼ì •
```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd CherryAI_0623

# 2. ê°€ìƒí™˜ê²½ ì„¤ì • (uv ì‚¬ìš©)
uv venv
source .venv/bin/activate

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
uv pip install -r requirements.txt

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì— í•„ìš”í•œ API í‚¤ë“¤ ì„¤ì •

# 5. ì´ˆê¸° ì„¤ì •
python setup.py
```

### 3. A2A ì„œë²„ ì‹œìŠ¤í…œ ì‹œì‘
```bash
# macOS í™˜ê²½
./ai_ds_team_system_start.sh

# ì„œë²„ ìƒíƒœ í™•ì¸
ps aux | grep python | grep server
```

### 4. Streamlit UI ì‹¤í–‰
```bash
streamlit run ai.py
```

---

## ğŸ’¡ ì‚¬ìš©ë²•

### 1. ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°

1. **íŒŒì¼ ì—…ë¡œë“œ**
   - ì›¹ UIì—ì„œ CSV, Excel, JSON íŒŒì¼ ì—…ë¡œë“œ
   - ìë™ìœ¼ë¡œ Phase 1 ì‹œìŠ¤í…œì´ íŒŒì¼ì„ ì¶”ì  ë° ê´€ë¦¬

2. **ë¶„ì„ ìš”ì²­**
   - ìì—°ì–´ë¡œ ë¶„ì„ ìš”ì²­ ì…ë ¥
   - ì˜ˆ: "ì´ ë°ì´í„°ì˜ ê¸°ë³¸ í†µê³„ì™€ ì‹œê°í™”ë¥¼ ë§Œë“¤ì–´ì¤˜"

3. **ìë™ ì²˜ë¦¬**
   - Phase 4 Auto Data Profilerê°€ ë°ì´í„° í’ˆì§ˆ ë¶„ì„
   - Universal Routerê°€ ìµœì  ì—ì´ì „íŠ¸ ì„ íƒ
   - Multi-Agent Orchestratorê°€ ì‘ì—… ë¶„ë°°

4. **ì‹¤ì‹œê°„ ê²°ê³¼**
   - ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í™•ì¸
   - ì½”ë“œ ìƒì„± ë° ì‹¤í–‰ ê³¼ì • ì¶”ì 
   - AI ê¸°ë°˜ ê²°ê³¼ í•´ì„ ë° ì¶”ì²œì‚¬í•­ ì œê³µ

### 2. Phaseë³„ ìƒì„¸ ê¸°ëŠ¥

#### Phase 1: Enhanced User File Management
```python
from core.user_file_tracker import get_user_file_tracker

# UserFileTracker ì‚¬ìš©
tracker = get_user_file_tracker()

# íŒŒì¼ ë“±ë¡
tracker.register_uploaded_file(
    file_id="data.csv",
    original_name="sales_data.csv", 
    session_id="session_123",
    data=dataframe,
    user_context="ì›”ë³„ ë§¤ì¶œ ë°ì´í„°"
)

# A2A ìš”ì²­ì— ìµœì  íŒŒì¼ ì„ íƒ
file_path, reason = tracker.get_file_for_a2a_request(
    user_request="ë§¤ì¶œ íŠ¸ë Œë“œ ë¶„ì„",
    session_id="session_123",
    agent_name="eda_tools_agent"
)
```

#### Phase 4: Auto Data Profiler
```python
from core.auto_data_profiler import get_auto_data_profiler

profiler = get_auto_data_profiler()
profile_result = profiler.profile_data(
    data=dataframe,
    dataset_name="sales_data",
    session_id="session_123"
)

print(f"ë°ì´í„° í’ˆì§ˆ: {profile_result.quality_score:.2%}")
print(f"ì£¼ìš” ì¸ì‚¬ì´íŠ¸: {profile_result.key_insights}")
```

#### Phase 4: Advanced Code Tracker
```python
from core.advanced_code_tracker import get_advanced_code_tracker

tracker = get_advanced_code_tracker()
result = tracker.track_and_execute_code(
    code="df.describe()",
    context={"df": dataframe},
    safe_execution=True
)

if result.success:
    print(f"ì‹¤í–‰ ì‹œê°„: {result.execution_time:.3f}ì´ˆ")
    print(f"ê²°ê³¼: {result.result}")
```

#### Phase 4: Intelligent Result Interpreter
```python
from core.intelligent_result_interpreter import get_intelligent_result_interpreter

interpreter = get_intelligent_result_interpreter()
interpretation = interpreter.interpret_results({
    "agent_name": "eda_agent",
    "artifacts": [{"type": "chart", "content": "..."}],
    "executed_code_blocks": [...],
    "session_id": "session_123"
})

print(f"ìš”ì•½: {interpretation.summary}")
print(f"ì¶”ì²œì‚¬í•­: {interpretation.recommendations}")
```

---

## ğŸ”§ ê³ ê¸‰ ì„¤ì •

### 1. Langfuse í†µí•© ì„¤ì •
```python
# .env íŒŒì¼ì— ì¶”ê°€
LANGFUSE_SECRET_KEY=your_secret_key
LANGFUSE_PUBLIC_KEY=your_public_key
LANGFUSE_HOST=https://cloud.langfuse.com

# Enhanced Tracer ì‚¬ìš©
from core.enhanced_langfuse_tracer import get_enhanced_tracer

tracer = get_enhanced_tracer()
tracer.log_agent_communication(
    source_agent="UI",
    target_agent="eda_agent", 
    message="ë°ì´í„° ë¶„ì„ ìš”ì²­",
    metadata={"session_id": "123"}
)
```

### 2. Multi-Agent Orchestration ì»¤ìŠ¤í„°ë§ˆì´ì§•
```python
from core.multi_agent_orchestrator import get_multi_agent_orchestrator

orchestrator = get_multi_agent_orchestrator()

# ì»¤ìŠ¤í…€ ì‘ì—… ê³„íš ì‹¤í–‰
plan = [
    {"agent_name": "data_cleaning", "description": "ë°ì´í„° ì •ë¦¬"},
    {"agent_name": "eda_tools", "description": "ê¸°ì´ˆ í†µê³„ ë¶„ì„"},
    {"agent_name": "data_visualization", "description": "ì‹œê°í™” ìƒì„±"}
]

results = await orchestrator.execute_plan(plan, session_id="session_123")
```

---

## ğŸ“Š ì„±ëŠ¥ ë° ëª¨ë‹ˆí„°ë§

### 1. ì‹œìŠ¤í…œ ì„±ëŠ¥ ì§€í‘œ
- **ë°ì´í„° í’ˆì§ˆ ì ìˆ˜**: í‰ê·  96%+ 
- **íŒŒì¼ ì²˜ë¦¬ ì†ë„**: 15ê°œ ë ˆì½”ë“œ ê¸°ì¤€ <1ì´ˆ
- **ì—ì´ì „íŠ¸ ì‘ë‹µ ì‹œê°„**: í‰ê·  2-5ì´ˆ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ì¼ë°˜ì ìœ¼ë¡œ <500MB

### 2. í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë¹ ë¥¸ í†µí•© í…ŒìŠ¤íŠ¸
python quick_integration_test.py

# ìƒì„¸ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
python test_complete_workflow.py
```

### 3. ë¡œê·¸ ë° ë””ë²„ê¹…
```bash
# ì‹œìŠ¤í…œ ë¡œê·¸ í™•ì¸
tail -f logs/streamlit_debug.log

# A2A ì„œë²„ ìƒíƒœ í™•ì¸
ps aux | grep python | grep server

# ë””ë²„ê¹… ëª¨ë“œ í™œì„±í™” (UIì—ì„œ)
# ì‚¬ì´ë“œë°” > ê³ ê¸‰ ì„¤ì • > ë””ë²„ê¹… ëª¨ë“œ ON
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### 1. ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### Q: A2A ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ
```bash
# í•´ê²° ë°©ë²•
pkill -f python  # ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
rm -rf __pycache__  # ìºì‹œ ì •ë¦¬
./ai_ds_team_system_start.sh  # ì¬ì‹œì‘
```

#### Q: íŒŒì¼ ì—…ë¡œë“œ í›„ ë¶„ì„ì´ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•¨
- **ì›ì¸**: Phase 1 UserFileTracker ë¯¸í†µí•©
- **í•´ê²°**: ai.pyì˜ execute_agent_stepì—ì„œ SessionDataManager ì‚¬ìš© í™•ì¸

#### Q: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŒ
- **í•´ê²°**: Phase 4 Auto Data Profilerì˜ sampling_threshold ì¡°ì •
- **ì„¤ì •**: `profiler.set_sampling_threshold(10000)`

### 2. ì„±ëŠ¥ ìµœì í™” íŒ

#### ë°ì´í„° ì²˜ë¦¬ ìµœì í™”
```python
# í° ë°ì´í„°ì…‹ì˜ ê²½ìš° ìƒ˜í”Œë§ ì‚¬ìš©
from core.auto_data_profiler import get_auto_data_profiler

profiler = get_auto_data_profiler()
profiler.set_sampling_threshold(5000)  # 5000 ë ˆì½”ë“œ ì´ìƒ ì‹œ ìƒ˜í”Œë§
```

#### ë©”ëª¨ë¦¬ ê´€ë¦¬
```python
# ì„¸ì…˜ë³„ íŒŒì¼ ì •ë¦¬
from core.user_file_tracker import get_user_file_tracker

tracker = get_user_file_tracker()
tracker.cleanup_old_files(hours_threshold=24)  # 24ì‹œê°„ ì´ìƒ ëœ íŒŒì¼ ì •ë¦¬
```

---

## ğŸ“ˆ í™•ì¥ ê°€ëŠ¥ì„±

### 1. ìƒˆë¡œìš´ ì—ì´ì „íŠ¸ ì¶”ê°€
```python
# ìƒˆë¡œìš´ ì „ë¬¸ ì—ì´ì „íŠ¸ ë“±ë¡
from core.specialized_data_agents import get_specialized_agents_manager

manager = get_specialized_agents_manager()
manager.register_agent(
    agent_name="time_series_analysis",
    capabilities=["ì‹œê³„ì—´", "ì˜ˆì¸¡", "íŠ¸ë Œë“œ"],
    server_url="http://localhost:8010"
)
```

### 2. ì»¤ìŠ¤í…€ ë°ì´í„° í”„ë¡œíŒŒì¼ëŸ¬
```python
from core.auto_data_profiler import AutoDataProfiler

class CustomProfiler(AutoDataProfiler):
    def custom_quality_check(self, data):
        # ë„ë©”ì¸ë³„ í’ˆì§ˆ ê²€ì‚¬ ë¡œì§
        return quality_score
```

### 3. ê²°ê³¼ í•´ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```python
from core.intelligent_result_interpreter import ResultInterpreter

class DomainSpecificInterpreter(ResultInterpreter):
    def interpret_domain_results(self, analysis_data):
        # íŠ¹ì • ë„ë©”ì¸ ì „ë¬¸ í•´ì„ ë¡œì§
        return interpretation_result
```

---

## ğŸ”’ ë³´ì•ˆ ë° ê°œì¸ì •ë³´ ë³´í˜¸

### 1. ë°ì´í„° ë³´ì•ˆ
- ì—…ë¡œë“œëœ íŒŒì¼ì€ ì„¸ì…˜ë³„ë¡œ ê²©ë¦¬
- ì„ì‹œ íŒŒì¼ì€ 48ì‹œê°„ í›„ ìë™ ì •ë¦¬
- ì½”ë“œ ì‹¤í–‰ì€ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬

### 2. API í‚¤ ê´€ë¦¬
```bash
# .env íŒŒì¼ ë³´ì•ˆ ì„¤ì •
chmod 600 .env

# API í‚¤ ë¡œí…Œì´ì…˜
LANGFUSE_SECRET_KEY=new_secret_key
OPENAI_API_KEY=new_openai_key
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### 1. ê´€ë ¨ ë¬¸ì„œ
- [A2A SDK 0.2.9 ê³µì‹ ë¬¸ì„œ](https://github.com/a2aproject/a2a-python)
- [Langfuse v2 Integration Guide](docs/langfuse_a2a_integration_guide.md)
- [Enhanced Error System](docs/enhanced_error_system.md)

### 2. ì˜ˆì œ ì½”ë“œ
- [í†µí•© í…ŒìŠ¤íŠ¸ ì˜ˆì œ](quick_integration_test.py)
- [Enhanced Langfuse ì˜ˆì œ](examples/enhanced_langfuse_integration_example.py)

### 3. ë²„ì „ íˆìŠ¤í† ë¦¬
- **v1.0**: Phase 1-4 ì™„ì„± (2025-01-11)
- **v0.9**: Phase 4 ê³ ê¸‰ ì‹œìŠ¤í…œ êµ¬í˜„
- **v0.8**: Phase 3 ë©€í‹° ì—ì´ì „íŠ¸ í†µí•©
- **v0.7**: Phase 2 Pandas-AI í†µí•©
- **v0.6**: Phase 1 íŒŒì¼ ì¶”ì  ì‹œìŠ¤í…œ

---

## ğŸ‰ ê²°ë¡ 

CherryAI Phase 1-4 ì‹œìŠ¤í…œì€ ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì™„ë²½íˆ ì¶©ì¡±í•˜ëŠ” ê³ ê¸‰ ë°ì´í„° ë¶„ì„ í”Œë«í¼ì…ë‹ˆë‹¤:

âœ… **íŒŒì¼ ì—…ë¡œë“œ ì •í™•ì„± ê°œì„ **: UserFileTrackerë¥¼ í†µí•œ ì™„ë²½í•œ íŒŒì¼ ì¶”ì   
âœ… **pandas-ai í†µí•©**: A2A SDK 0.2.9 ì™„ì „ í˜¸í™˜  
âœ… **ë²”ìš© LLM ë©€í‹° ì—ì´ì „íŠ¸**: 9ê°œ ì „ë¬¸ ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜  
âœ… **ìƒì„¸ ë¡œê¹…**: Enhanced Langfuse v2 ì™„ì „ í†µí•©  
âœ… **ê³ ê¸‰ ìë™í™”**: í”„ë¡œíŒŒì¼ë§, ì½”ë“œ ì¶”ì , ê²°ê³¼ í•´ì„ ìë™í™”

ì´ì œ ì‚¬ìš©ìëŠ” ì–´ë–¤ ë°ì´í„° íŒŒì¼ì´ë“  ì—…ë¡œë“œí•˜ì—¬ ì „ë¬¸ì ì´ê³  ì •í™•í•œ ë¶„ì„ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°›ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš€ 